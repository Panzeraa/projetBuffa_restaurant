{"remainingRequest":"/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/src/components/Restaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/src/components/Restaurants.vue","mtime":1577530485313},{"path":"/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/yonib/Desktop/MIAGE/MASTER/Buffa/projetBuffa_restaurant/projetbuffa_modele_cli_router/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJSZXN0YXVyYW50cyIsCiAgICBwcm9wczogewogICAgICAgIGlzVXBkYXRlOiBCb29sZWFuCiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmVzdGF1cmFudHM6IFtdLAogICAgICAgICAgICBuYlJlc3RhdXJhbnRzOiAwLAogICAgICAgICAgICBub206ICIiLAogICAgICAgICAgICBjdWlzaW5lOiAiIiwKICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgcGFnZXNpemU6MTAsCiAgICAgICAgICAgIG5vbVJlY2hlcmNoZTogIiIsCiAgICAgICAgICAgIG5iUGFnZXNEZVJlc3VsdGF0czogMCwKICAgICAgICAgICAgYXBpVVJMOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS9yZXN0YXVyYW50cyIKICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgY29uc29sZS5sb2coIkFWQU5UIEFGRklDSEFHRSAhIik7CiAgICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBnZXREYXRhRnJvbVNlcnZlcigpIHsKICAgICAgICAgICAgLy8gaWNpIG9uIGZhaXQgdW4gZmV0Y2ggcG91ciByw6ljdXDDqXJlciBkZXMKICAgICAgICAgICAgLy8gcmVzdGF1cmFudHMgc3VyIGxlIHNlcnZldXIuCiAgICAgICAgICAgIGxldCB1cmwgPQogICAgICAgICAgICAgICAgdGhpcy5hcGlVUkwgKwogICAgICAgICAgICAgICAgIj9wYWdlPSIgKyB0aGlzLnBhZ2UgKwogICAgICAgICAgICAgICAgIiZwYWdlc2l6ZT0iICsgdGhpcy5wYWdlc2l6ZSArCiAgICAgICAgICAgICAgICAiJm5hbWU9IiArIHRoaXMubm9tUmVjaGVyY2hlOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCByZXBvbnNlSlNPTiA9IGF3YWl0IGZldGNoKHVybCk7CiAgICAgICAgICAgICAgICBsZXQgcmVwb25zZUpTID0gYXdhaXQgcmVwb25zZUpTT04uanNvbigpOwogICAgICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlcG9uc2VKUy5kYXRhOwogICAgICAgICAgICAgICAgdGhpcy5uYlJlc3RhdXJhbnRzID0gcmVwb25zZUpTLmNvdW50OwogICAgICAgICAgICAgICAgdGhpcy5uYlBhZ2VzRGVSZXN1bHRhdHMgPSBNYXRoLmZsb29yKAogICAgICAgICAgICAgICAgICAgIHRoaXMubmJSZXN0YXVyYW50cyAvIHRoaXMucGFnZXNpemUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkVycmV1ciBkYW5zIGxlcyBmZXRjaHMgR0VUICIgKyBlcnIubXNnKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgc3VwcHJpbWVyUmVzdGF1cmFudChpZCkgewogICAgICAgICAgICAvL3RoaXMucmVzdGF1cmFudHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLmFwaVVSTCArICIvIiArIGlkOwogICAgICAgICAgICAgICAgbGV0IHJlcG9uc2VKU09OID0gYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiREVMRVRFIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsZXQgcmVwb25zZUpTID0gYXdhaXQgcmVwb25zZUpTT04uanNvbigpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlJlc3RhdXJhbnQgc3VwcHJpbWUgOiAiICsgcmVwb25zZUpTLm1zZyk7CiAgICAgICAgICAgICAgICB0aGlzLmdldERhdGFGcm9tU2VydmVyKCk7IC8vIG9uIHJhZnJhaWNoaXQgbCdhZmZpY2hhZ2UKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyZXVyIGRhbnMgbGUgZmV0Y2hzIERFTEVURSAiICsgZXJyLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFqb3V0ZXJSZXN0YXVyYW50KGV2ZW50KSB7CiAgICAgICAgICAgIC8vIGV2aXRlciBsZSBjb21wb3J0ZW1lbnQgcGFyIGRlZmF1dAogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50cy5wdXNoKHsKICAgICAgICAgICAgICAgIG5vbTogdGhpcy5ub20sCiAgICAgICAgICAgICAgICBjdWlzaW5lOiB0aGlzLmN1aXNpbmUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMubm9tID0gIiI7CiAgICAgICAgICAgIHRoaXMuY3Vpc2luZSA9ICIiOwogICAgICAgIH0sCiAgICAgICAgZ2V0Q29sb3IoaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGluZGV4ICUgMiA/ICJsaWdodEJsdWUiIDogInBpbmsiOwogICAgICAgIH0sCiAgICAgICAgcGFnZVN1aXZhbnRlKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiUGFnZSBzdWl2YW50ZSIpOwogICAgICAgICAgICB0aGlzLnBhZ2UrKzsKICAgICAgICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOwogICAgICAgIH0sCiAgICAgICAgcGFnZVByZWNlZGVudGUoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJQYWdlIHByZWNlZGVudGUiKTsKICAgICAgICAgICAgdGhpcy5wYWdlLS07CiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUZyb21TZXJ2ZXIoKTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["Restaurants.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Restaurants.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <div>\n        <p>\n            Rechercher par nom:\n            <input type=\"text\" v-model=\"nomRecherche\" v-on:input=\"getDataFromServer()\" />\n        </p>\n        <p>\n            Nombre de restaurants par page :\n            <input\n                    type=\"range\"\n                    min=\"1\"\n                    max=\"100\"\n                    value=\"12\"\n                    v-on:input=\"getDataFromServer()\"\n                    v-model=\"pagesize\"\n            />\n            {{pagesize}}\n        </p>\n        <h1>Nombre de restaurants : {{nbRestaurants}}</h1>\n        <button v-on:click=\"pagePrecedente()\" v-bind:disabled=\"page==0\">Précédent</button>\n        <button v-on:click=\"pageSuivante()\" :disabled=\"page == nbPagesDeResultats\">Suivant</button>\n\n        <H1>TABLE VUE-MATERIAL</H1>\n        <md-table v-model=\"restaurants\" md-sort=\"name\" md-sort-order=\"asc\" md-card md-fixed-header>\n            <md-table-toolbar>\n                <div class=\"md-toolbar-section-start\">\n                    <h1 class=\"md-title\">Nom cherche</h1>\n                </div>\n\n                <md-field md-clearable class=\"md-toolbar-section-end\">\n                    <md-input placeholder=\"Search by name...\" v-model=\"nomRecherche\" @input=\"getDataFromServer()\" />\n                </md-field>\n            </md-table-toolbar>\n\n            <md-table-empty-state\n                    md-label=\"No users found\"\n                    :md-description=\"`No user found for this '${nomRecherche}' query. Try a different search term or create a new user.`\">\n\n            </md-table-empty-state>\n\n\n\n            <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\n                <md-table-cell md-label=\"Name\" md-sort-by=\"name\">{{ item.name }}</md-table-cell>\n                <md-table-cell md-label=\"Cuisine\" md-sort-by=\"cuisine\">{{ item.cuisine }}</md-table-cell>\n                <md-table-cell md-label=\"Details\"><router-link :to=\"'restaurants/'+item._id\">Details</router-link></md-table-cell>\n                <md-table-cell md-label=\"Supprimer\"><button v-on:click=\"supprimerRestaurant(item._id)\" ><md-icon md-label=\"Suppression\">delete</md-icon></button></md-table-cell>\n                <md-table-cell md-label=\"Modifier\"><router-link :to=\"'restaurants/'+item._id\">Modifier</router-link></md-table-cell>\n            </md-table-row>\n        </md-table>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Restaurants\",\n        props: {\n            isUpdate: Boolean\n        },\n        data: function() {\n            return {\n                restaurants: [],\n                nbRestaurants: 0,\n                nom: \"\",\n                cuisine: \"\",\n                page: 0,\n                pagesize:10,\n                nomRecherche: \"\",\n                nbPagesDeResultats: 0,\n                apiURL: \"http://localhost:8081/api/restaurants\"\n            };\n        },\n        mounted() {\n            console.log(\"AVANT AFFICHAGE !\");\n            this.getDataFromServer();\n        },\n        methods: {\n            async getDataFromServer() {\n                // ici on fait un fetch pour récupérer des\n                // restaurants sur le serveur.\n                let url =\n                    this.apiURL +\n                    \"?page=\" + this.page +\n                    \"&pagesize=\" + this.pagesize +\n                    \"&name=\" + this.nomRecherche;\n\n                try {\n                    let reponseJSON = await fetch(url);\n                    let reponseJS = await reponseJSON.json();\n                    this.restaurants = reponseJS.data;\n                    this.nbRestaurants = reponseJS.count;\n                    this.nbPagesDeResultats = Math.floor(\n                        this.nbRestaurants / this.pagesize\n                    );\n                } catch (err) {\n                    console.log(\"Erreur dans les fetchs GET \" + err.msg);\n                }\n            },\n            async supprimerRestaurant(id) {\n                //this.restaurants.splice(index, 1);\n                try {\n                    let url = this.apiURL + \"/\" + id;\n                    let reponseJSON = await fetch(url, {\n                        method: \"DELETE\"\n                    });\n                    let reponseJS = await reponseJSON.json();\n                    console.log(\"Restaurant supprime : \" + reponseJS.msg);\n                    this.getDataFromServer(); // on rafraichit l'affichage\n                } catch (err) {\n                    console.log(\"Erreur dans le fetchs DELETE \" + err.msg);\n                }\n            },\n            ajouterRestaurant(event) {\n                // eviter le comportement par defaut\n                event.preventDefault();\n\n                this.restaurants.push({\n                    nom: this.nom,\n                    cuisine: this.cuisine\n                });\n                this.nom = \"\";\n                this.cuisine = \"\";\n            },\n            getColor(index) {\n                return index % 2 ? \"lightBlue\" : \"pink\";\n            },\n            pageSuivante() {\n                console.log(\"Page suivante\");\n                this.page++;\n                this.getDataFromServer();\n            },\n            pagePrecedente() {\n                console.log(\"Page precedente\");\n                this.page--;\n                this.getDataFromServer();\n            }\n        }\n    };\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n</style>\n"]}]}